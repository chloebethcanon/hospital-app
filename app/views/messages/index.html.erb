
<div ng-app="app">
  <div ng-controller="messagesCtrl" ng-init="setup()">
  <div class="wrapper wrapper-content animated fadeInRight">

    <% if current_user.is_hospital_staff? %>
      <div class="row">
        <div class="col-lg-12">
          <div class="wrapper wrapper-content animated fadeInUp">
            <ul class="notes">
                <li ng-repeat="received_message in received_messages">
                  <div>
                    <small>{{ received_message.readable_date }}  •  {{ received_message.readable_time }}</small>
                    <h4>{{ received_message.sender_full_name }}</h4>
                    <p>{{ received_message.body }}</p>
                    <a ng-click="deleteMessage(received_message)" href="javascript:void(0)"><i class="fa fa-trash-o "></i></a>
                  </div>
                </li>
            </ul>
          </div>  
        </div>
      </div>

    <% else %>

      <div class="col-md-8">

        <div class="ibox float-e-margins">
          <div class="ibox-title">

            <h5>Feed</h5>
            <div class="ibox-tools">
              <a class="collapse-link">
                <i class="fa fa-chevron-up"></i>
              </a>
              <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="fa fa-wrench"></i>
              </a>
              <ul class="dropdown-menu dropdown-user">
                <li><a href="#">Config option 1</a>
                </li>
                <li><a href="#">Config option 2</a>
                </li>
              </ul>
              <a class="close-link">
                <i class="fa fa-times"></i>
              </a>
            </div>
          </div>

          <div class="ibox-content">

            <div class="wrapper wrapper-content animated fadeInRight">
              <div class="feed-activity-list">

                <% @messages.each do |message| %>
                  <div class="feed-element">
                    <a href="#" class="pull-left">
                      <img alt="image" class="img-circle" src="<%= message.sender.avatar_url %>">
                    </a>
                    <div class="media-body ">
                      <small class="pull-right">2h ago</small>
                      <strong><%= message.sender.full_name %></strong> posted a message. <br>
                      <small class="text-muted"><%= message.readable_date %>  •  <%= message.readable_time %></small>
                      <div class="well">
                        <%= message.body %>
                      </div>
                      <div class="pull-left">
                        <%= button_to "Delete", "/messages/#{message.id}", class: "btn btn-xs btn-warning", method: :delete %> 
                      </div>
                      <div class="pull-right">
                        <a class="btn btn-xs btn-white"><i class="fa fa-thumbs-up"></i> Like </a>
                        <a class="btn btn-xs btn-white"><i class="fa fa-heart"></i> Love</a>
                        <a class="btn btn-xs btn-primary"><i class="fa fa-pencil"></i> Message</a>
                      </div>
                    </div>
                  </div>
                <% end %>

              </div>

              <button class="btn btn-primary btn-block m"><i class="fa fa-arrow-down"></i> Show More</button>

            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  </div>
</div>


